{"ast":null,"code":"import _regeneratorRuntime from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectWithoutProperties from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _asyncToGenerator from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import api from'../../services/api';import{Link}from'react-router-dom';import'./styles.css';var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={reminders:[],reminderInfo:{},page:1};_this.loadReminders=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var page,response,_response$data,docs,reminderInfo,_args=arguments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:page=_args.length>0&&_args[0]!==undefined?_args[0]:1;_context.next=3;return api.get(\"/reminders?page=\".concat(page));case 3:response=_context.sent;_response$data=response.data,docs=_response$data.docs,reminderInfo=_objectWithoutProperties(_response$data,[\"docs\"]);_this.setState({reminders:docs,reminderInfo:reminderInfo,page:page});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.prevPage=function(){var page=_this.state.page;if(page===1)return;var pageNumber=page-1;_this.loadReminders(pageNumber);};_this.nextPage=function(){var _this$state=_this.state,page=_this$state.page,reminderInfo=_this$state.reminderInfo;if(page===reminderInfo.pages)return;var pageNumber=page+1;_this.loadReminders(pageNumber);};_this.deleteReminder=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return api.delete(\"/reminders/\".concat(id));case 3:window.location.reload(false);_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);_this.setState({error:_context2.t0});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x){return _ref2.apply(this,arguments);};}();return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){this.loadReminders();}},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,reminders=_this$state2.reminders,page=_this$state2.page,reminderInfo=_this$state2.reminderInfo;return/*#__PURE__*/React.createElement(\"div\",{className:\"reminder-list\"},/*#__PURE__*/React.createElement(\"div\",{className:\"button-insert\"},/*#__PURE__*/React.createElement(Link,{to:'/reminders/new-reminder'},\"Insert New Reminder\")),reminders.map(function(reminder){return/*#__PURE__*/React.createElement(\"article\",{key:reminder._id},/*#__PURE__*/React.createElement(\"strong\",null,reminder.title),/*#__PURE__*/React.createElement(\"p\",null,reminder.description),/*#__PURE__*/React.createElement(\"div\",{id:\"actions-button\"},/*#__PURE__*/React.createElement(Link,{to:\"/reminders/\".concat(reminder._id)},\"Access\"),/*#__PURE__*/React.createElement(\"button\",{id:\"delete-button\",onClick:function onClick(e){return _this2.deleteReminder(reminder._id);},key:reminder._id},\"Delete\")));}),/*#__PURE__*/React.createElement(\"div\",{className:\"actions\"},/*#__PURE__*/React.createElement(\"button\",{disabled:page===1,onClick:this.prevPage},\"Previous\"),/*#__PURE__*/React.createElement(\"button\",{disabled:page===reminderInfo.pages,onClick:this.nextPage},\"Next\")));}}]);return Main;}(Component);export{Main as default};","map":{"version":3,"sources":["/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/src/pages/main/index.js"],"names":["React","Component","api","Link","Main","state","reminders","reminderInfo","page","loadReminders","get","response","data","docs","setState","prevPage","pageNumber","nextPage","pages","deleteReminder","id","delete","window","location","reload","error","map","reminder","_id","title","description","e"],"mappings":"i0CAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CAEA,MAAO,cAAP,C,GAEqBC,CAAAA,I,mTAEjBC,K,CAAQ,CACJC,SAAS,CAAG,EADR,CAEJC,YAAY,CAAE,EAFV,CAGJC,IAAI,CAAE,CAHF,C,OAURC,a,sEAAgB,sMAAOD,IAAP,+CAAc,CAAd,uBACWN,CAAAA,GAAG,CAACQ,GAAJ,2BAA2BF,IAA3B,EADX,QACNG,QADM,8BAGoBA,QAAQ,CAACC,IAH7B,CAGLC,IAHK,gBAGLA,IAHK,CAGIN,YAHJ,mDAKZ,MAAKO,QAAL,CAAc,CAACR,SAAS,CAAEO,IAAZ,CAAkBN,YAAY,CAAZA,YAAlB,CAAgCC,IAAI,CAAJA,IAAhC,CAAd,EALY,sD,SAQhBO,Q,CAAW,UAAM,IACNP,CAAAA,IADM,CACE,MAAKH,KADP,CACNG,IADM,CAGb,GAAGA,IAAI,GAAI,CAAX,CAAc,OAEd,GAAMQ,CAAAA,UAAU,CAAGR,IAAI,CAAG,CAA1B,CAEA,MAAKC,aAAL,CAAmBO,UAAnB,EACH,C,OAEDC,Q,CAAW,UAAM,iBACgB,MAAKZ,KADrB,CACNG,IADM,aACNA,IADM,CACAD,YADA,aACAA,YADA,CAGb,GAAGC,IAAI,GAAKD,YAAY,CAACW,KAAzB,CAAgC,OAEhC,GAAMF,CAAAA,UAAU,CAAGR,IAAI,CAAG,CAA1B,CAEA,MAAKC,aAAL,CAAmBO,UAAnB,EACH,C,OAEDG,c,2FAAiB,kBAAOC,EAAP,8JAEHlB,CAAAA,GAAG,CAACmB,MAAJ,sBAAyBD,EAAzB,EAFG,QAGTE,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EAHS,kFAKT,MAAKV,QAAL,CAAc,CACZW,KAAK,aADO,CAAd,EALS,qE,4JAhCE,CACf,KAAKhB,aAAL,GACH,C,uCA0CO,kCACoC,KAAKJ,KADzC,CACGC,SADH,cACGA,SADH,CACcE,IADd,cACcA,IADd,CACoBD,YADpB,cACoBA,YADpB,CAEJ,mBACI,2BAAK,SAAS,CAAC,eAAf,eACI,2BAAK,SAAS,CAAC,eAAf,eACA,oBAAC,IAAD,EAAM,EAAE,CAAE,yBAAV,wBADA,CADJ,CAIKD,SAAS,CAACoB,GAAV,CAAc,SAAAC,QAAQ,qBACnB,+BAAS,GAAG,CAAEA,QAAQ,CAACC,GAAvB,eACI,kCAASD,QAAQ,CAACE,KAAlB,CADJ,cAEJ,6BAAIF,QAAQ,CAACG,WAAb,CAFI,cAIJ,2BAAK,EAAE,CAAC,gBAAR,eACI,oBAAC,IAAD,EAAM,EAAE,sBAAgBH,QAAQ,CAACC,GAAzB,CAAR,WADJ,cAEI,8BAAQ,EAAE,CAAC,eAAX,CAA2B,OAAO,CAAE,iBAACG,CAAD,QAAO,CAAA,MAAI,CAACZ,cAAL,CAAoBQ,QAAQ,CAACC,GAA7B,CAAP,EAApC,CACQ,GAAG,CAAED,QAAQ,CAACC,GADtB,WAFJ,CAJI,CADmB,EAAtB,CAJL,cAiBA,2BAAK,SAAS,CAAC,SAAf,eACI,8BAAQ,QAAQ,CAAEpB,IAAI,GAAI,CAA1B,CAA6B,OAAO,CAAE,KAAKO,QAA3C,aADJ,cAEI,8BAAQ,QAAQ,CAAEP,IAAI,GAAKD,YAAY,CAACW,KAAxC,CAA+C,OAAO,CAAE,KAAKD,QAA7D,SAFJ,CAjBA,CADJ,CAwBH,C,kBA9E6BhB,S,SAAbG,I","sourcesContent":["import React, {Component} from 'react';\nimport api from '../../services/api';\nimport {Link} from 'react-router-dom';\n\nimport './styles.css';\n\nexport default class Main extends Component{\n\n    state = {\n        reminders : [],\n        reminderInfo: {},\n        page: 1\n    };\n\n    componentDidMount(){\n        this.loadReminders();\n    };\n\n    loadReminders = async (page = 1) =>{\n        const response = await api.get(`/reminders?page=${page}`);\n\n        const {docs, ...reminderInfo} = response.data;\n\n        this.setState({reminders: docs, reminderInfo, page});\n    };\n\n    prevPage = () => {\n        const {page} = this.state;\n\n        if(page ===1) return;\n\n        const pageNumber = page - 1;\n\n        this.loadReminders(pageNumber);\n    }\n\n    nextPage = () => {\n        const {page, reminderInfo} = this.state;\n\n        if(page === reminderInfo.pages) return;\n\n        const pageNumber = page + 1;\n\n        this.loadReminders(pageNumber);\n    }\n\n    deleteReminder = async (id) => {\n          try {\n            await api.delete(`/reminders/${id}`);\n            window.location.reload(false);\n          } catch (err) {\n            this.setState({\n              error:\n                err\n            });\n          }\n      };\n\n    render(){\n        const {reminders, page, reminderInfo} = this.state;\n        return (\n            <div className=\"reminder-list\">\n                <div className=\"button-insert\">\n                <Link to={'/reminders/new-reminder'}>Insert New Reminder</Link>\n                </div>\n                {reminders.map(reminder => (\n                    <article key={reminder._id}>\n                        <strong>{reminder.title}</strong>\n                <p>{reminder.description}</p>\n                \n                <div id=\"actions-button\">\n                    <Link to={`/reminders/${reminder._id}`}>Access</Link>\n                    <button id=\"delete-button\" onClick={(e) => this.deleteReminder(reminder._id)} \n                            key={reminder._id}>Delete</button>\n                </div>\n                    </article>\n        ))}\n        \n            <div className=\"actions\">\n                <button disabled={page ===1} onClick={this.prevPage}>Previous</button>\n                <button disabled={page === reminderInfo.pages} onClick={this.nextPage}>Next</button> \n            </div>\n        </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}