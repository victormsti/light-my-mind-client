{"ast":null,"code":"import _regeneratorRuntime from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link,withRouter}from\"react-router-dom\";import Logo from\"../../logo.svg\";import api from\"../../services/api\";import{login,userId}from\"../../services/auth\";import{Form,Container}from\"./styles\";var SignIn=/*#__PURE__*/function(_Component){_inherits(SignIn,_Component);var _super=_createSuper(SignIn);function SignIn(){var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",error:\"\"};_this.handleSignIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,email,password,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,email=_this$state.email,password=_this$state.password;if(!(!email||!password)){_context.next=6;break;}_this.setState({error:\"Fill all inputs to continue\"});_context.next=19;break;case 6:_context.prev=6;_context.next=9;return api.post(\"/auth\",{email:email,password:password});case 9:response=_context.sent;login(response.data.token);userId(response.data.userId);_this.props.history.push(\"/main\");window.location.reload(false);_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](6);_this.setState({error:_context.t0});case 19:case\"end\":return _context.stop();}}},_callee,null,[[6,16]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSignIn},/*#__PURE__*/React.createElement(\"img\",{src:Logo,alt:\"logo\"}),this.state.error&&/*#__PURE__*/React.createElement(\"p\",null,this.state.error),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"E-mail address\",onChange:function onChange(e){return _this2.setState({email:e.target.value});}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password\",onChange:function onChange(e){return _this2.setState({password:e.target.value});}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Login\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"SignUp for Free\")));}}]);return SignIn;}(Component);export default withRouter(SignIn);","map":{"version":3,"sources":["/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/src/pages/login/index.js"],"names":["React","Component","Link","withRouter","api","login","userId","Form","Container","SignIn","state","email","password","error","handleSignIn","e","preventDefault","setState","post","response","data","token","props","history","push","window","location","reload","Logo","target","value"],"mappings":"6mCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,C,iCAGA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,qBAA9B,CAEA,OAASC,IAAT,CAAeC,SAAf,KAAgC,UAAhC,C,GAEMC,CAAAA,M,2TACJC,K,CAAQ,CACNC,KAAK,CAAE,EADD,CAENC,QAAQ,CAAE,EAFJ,CAGNC,KAAK,CAAE,EAHD,C,OAMRC,Y,0FAAe,iBAAMC,CAAN,0JACbA,CAAC,CAACC,cAAF,GADa,YAEe,MAAKN,KAFpB,CAELC,KAFK,aAELA,KAFK,CAEEC,QAFF,aAEEA,QAFF,MAGT,CAACD,KAAD,EAAU,CAACC,QAHF,0BAIX,MAAKK,QAAL,CAAc,CAAEJ,KAAK,CAAE,6BAAT,CAAd,EAJW,oEAOcT,CAAAA,GAAG,CAACc,IAAJ,CAAS,OAAT,CAAkB,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAlB,CAPd,QAOHO,QAPG,eAQTd,KAAK,CAACc,QAAQ,CAACC,IAAT,CAAcC,KAAf,CAAL,CACAf,MAAM,CAACa,QAAQ,CAACC,IAAT,CAAcd,MAAf,CAAN,CACA,MAAKgB,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EAXS,iFAaT,MAAKV,QAAL,CAAc,CACZJ,KAAK,YADO,CAAd,EAbS,qE,uIAqBN,iBACP,mBACE,oBAAC,SAAD,mBACE,oBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKC,YAArB,eACE,2BAAK,GAAG,CAAEc,IAAV,CAAgB,GAAG,CAAC,MAApB,EADF,CAEG,KAAKlB,KAAL,CAAWG,KAAX,eAAoB,6BAAI,KAAKH,KAAL,CAAWG,KAAf,CAFvB,cAGE,6BACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAC,gBAFd,CAGE,QAAQ,CAAE,kBAAAE,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEN,KAAK,CAAEI,CAAC,CAACc,MAAF,CAASC,KAAlB,CAAd,CAAJ,EAHb,EAHF,cAQE,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,QAAQ,CAAE,kBAAAf,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEL,QAAQ,CAAEG,CAAC,CAACc,MAAF,CAASC,KAArB,CAAd,CAAJ,EAHb,EARF,cAaE,8BAAQ,IAAI,CAAC,QAAb,UAbF,cAcE,8BAdF,cAeE,oBAAC,IAAD,EAAM,EAAE,CAAC,SAAT,oBAfF,CADF,CADF,CAqBD,C,oBAlDkB7B,S,EAqDrB,cAAeE,CAAAA,UAAU,CAACM,MAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport Logo from \"../../logo.svg\";\nimport api from \"../../services/api\";\nimport { login, userId } from \"../../services/auth\";\n\nimport { Form, Container } from \"./styles\";\n\nclass SignIn extends Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    error: \"\"\n  };\n\n  handleSignIn = async e => {\n    e.preventDefault();\n    const { email, password } = this.state;\n    if (!email || !password) {\n      this.setState({ error: \"Fill all inputs to continue\" });\n    } else {\n      try {\n        const response = await api.post(\"/auth\", { email, password });\n        login(response.data.token);\n        userId(response.data.userId);\n        this.props.history.push(\"/main\");\n        window.location.reload(false);\n      } catch (err) {\n        this.setState({\n          error:\n            err\n        });\n      }\n    }\n  };\n\n  render() {\n    return (\n      <Container>\n        <Form onSubmit={this.handleSignIn}>\n          <img src={Logo} alt=\"logo\" />\n          {this.state.error && <p>{this.state.error}</p>}\n          <input\n            type=\"email\"\n            placeholder=\"E-mail address\"\n            onChange={e => this.setState({ email: e.target.value })}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={e => this.setState({ password: e.target.value })}\n          />\n          <button type=\"submit\">Login</button>\n          <hr />\n          <Link to=\"/signup\">SignUp for Free</Link>\n        </Form>\n      </Container>\n    );\n  }\n}\n\nexport default withRouter(SignIn);"]},"metadata":{},"sourceType":"module"}