{"ast":null,"code":"import _regeneratorRuntime from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link,withRouter}from\"react-router-dom\";import{login}from\"../../services/auth\";import api from\"../../services/api\";import Logo from\"../../logo.svg\";import{Form,Container}from\"./styles\";var SignUp=/*#__PURE__*/function(_Component){_inherits(SignUp,_Component);var _super=_createSuper(SignUp);function SignUp(){var _this;_classCallCheck(this,SignUp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:\"\",email:\"\",password:\"\",error:\"\"};_this.handleSignUp=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this$state,username,email,password,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,username=_this$state.username,email=_this$state.email,password=_this$state.password;if(!(!username||!email||!password)){_context.next=6;break;}_this.setState({error:\"Fill all inputs to sign up\"});_context.next=20;break;case 6:_context.prev=6;_context.next=9;return api.post(\"/users\",{username:username,email:email,password:password});case 9:_context.next=11;return api.post(\"/auth\",{email:email,password:password});case 11:response=_context.sent;login(response.data.token);_this.props.history.push(\"/main\");_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](6);console.log(_context.t0);_this.setState({error:\"An error ocurred\"});case 20:case\"end\":return _context.stop();}}},_callee,null,[[6,16]]);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(SignUp,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Form,{onSubmit:this.handleSignUp},/*#__PURE__*/React.createElement(\"img\",{src:Logo,alt:\"Airbnb logo\"}),this.state.error&&/*#__PURE__*/React.createElement(\"p\",null,this.state.error),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Username\",onChange:function onChange(e){return _this2.setState({username:e.target.value});}}),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",placeholder:\"E-mail address\",onChange:function onChange(e){return _this2.setState({email:e.target.value});}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"Password\",onChange:function onChange(e){return _this2.setState({password:e.target.value});}}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"SignUp for Free\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Login\")));}}]);return SignUp;}(Component);export default withRouter(SignUp);","map":{"version":3,"sources":["/home/victorsilva/Documents/JavaScript/light-my-mind/light-my-mind-client/src/pages/signup/index.js"],"names":["React","Component","Link","withRouter","login","api","Form","Container","SignUp","state","username","email","password","error","handleSignUp","e","preventDefault","setState","post","response","data","token","props","history","push","console","log","Logo","target","value"],"mappings":"6mCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CAEA,OAASC,KAAT,KAAsB,qBAAtB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,C,iCAIA,OAASC,IAAT,CAAeC,SAAf,KAAgC,UAAhC,C,GAEMC,CAAAA,M,2TACJC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENC,KAAK,CAAE,EAFD,CAGNC,QAAQ,CAAE,EAHJ,CAINC,KAAK,CAAE,EAJD,C,OAoCRC,Y,0FAAe,iBAAMC,CAAN,mKACbA,CAAC,CAACC,cAAF,GADa,YAEyB,MAAKP,KAF9B,CAELC,QAFK,aAELA,QAFK,CAEKC,KAFL,aAEKA,KAFL,CAEYC,QAFZ,aAEYA,QAFZ,MAGT,CAACF,QAAD,EAAa,CAACC,KAAd,EAAuB,CAACC,QAHf,0BAIX,MAAKK,QAAL,CAAc,CAAEJ,KAAK,CAAE,4BAAT,CAAd,EAJW,oEAOHR,CAAAA,GAAG,CAACa,IAAJ,CAAS,QAAT,CAAmB,CAAER,QAAQ,CAARA,QAAF,CAAYC,KAAK,CAALA,KAAZ,CAAmBC,QAAQ,CAARA,QAAnB,CAAnB,CAPG,+BAQcP,CAAAA,GAAG,CAACa,IAAJ,CAAS,OAAT,CAAkB,CAAEP,KAAK,CAALA,KAAF,CAASC,QAAQ,CAARA,QAAT,CAAlB,CARd,SAQHO,QARG,eASTf,KAAK,CAACe,QAAQ,CAACC,IAAT,CAAcC,KAAf,CAAL,CACA,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EAVS,iFAYTC,OAAO,CAACC,GAAR,cACA,MAAKT,QAAL,CAAc,CAAEJ,KAAK,CAAE,kBAAT,CAAd,EAbS,qE,uIA7BN,iBACP,mBACE,oBAAC,SAAD,mBACE,oBAAC,IAAD,EAAM,QAAQ,CAAE,KAAKC,YAArB,eACE,2BAAK,GAAG,CAAEa,IAAV,CAAgB,GAAG,CAAC,aAApB,EADF,CAEG,KAAKlB,KAAL,CAAWI,KAAX,eAAoB,6BAAI,KAAKJ,KAAL,CAAWI,KAAf,CAFvB,cAGE,6BACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,UAFd,CAGE,QAAQ,CAAE,kBAAAE,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEP,QAAQ,CAAEK,CAAC,CAACa,MAAF,CAASC,KAArB,CAAd,CAAJ,EAHb,EAHF,cAQE,6BACE,IAAI,CAAC,OADP,CAEE,WAAW,CAAC,gBAFd,CAGE,QAAQ,CAAE,kBAAAd,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEN,KAAK,CAAEI,CAAC,CAACa,MAAF,CAASC,KAAlB,CAAd,CAAJ,EAHb,EARF,cAaE,6BACE,IAAI,CAAC,UADP,CAEE,WAAW,CAAC,UAFd,CAGE,QAAQ,CAAE,kBAAAd,CAAC,QAAI,CAAA,MAAI,CAACE,QAAL,CAAc,CAAEL,QAAQ,CAAEG,CAAC,CAACa,MAAF,CAASC,KAArB,CAAd,CAAJ,EAHb,EAbF,cAkBE,8BAAQ,IAAI,CAAC,QAAb,oBAlBF,cAmBE,8BAnBF,cAoBE,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,UApBF,CADF,CADF,CA0BD,C,oBAnCkB5B,S,EAwDrB,cAAeE,CAAAA,UAAU,CAACK,MAAD,CAAzB","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\n\nimport { login } from \"../../services/auth\";\n\nimport api from \"../../services/api\";\n\nimport Logo from \"../../logo.svg\";\n\nimport { Form, Container } from \"./styles\";\n\nclass SignUp extends Component {\n  state = {\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    error: \"\"\n  };\n\n  render() {\n    return (\n      <Container>\n        <Form onSubmit={this.handleSignUp}>\n          <img src={Logo} alt=\"Airbnb logo\" />\n          {this.state.error && <p>{this.state.error}</p>}\n          <input\n            type=\"text\"\n            placeholder=\"Username\"\n            onChange={e => this.setState({ username: e.target.value })}\n          />\n          <input\n            type=\"email\"\n            placeholder=\"E-mail address\"\n            onChange={e => this.setState({ email: e.target.value })}\n          />\n          <input\n            type=\"password\"\n            placeholder=\"Password\"\n            onChange={e => this.setState({ password: e.target.value })}\n          />\n          <button type=\"submit\">SignUp for Free</button>\n          <hr />\n          <Link to=\"/\">Login</Link>\n        </Form>\n      </Container>\n    );\n  }\n\n  handleSignUp = async e => {\n    e.preventDefault();\n    const { username, email, password } = this.state;\n    if (!username || !email || !password) {\n      this.setState({ error: \"Fill all inputs to sign up\" });\n    } else {\n      try {\n        await api.post(\"/users\", { username, email, password });\n        const response = await api.post(\"/auth\", { email, password });\n        login(response.data.token);\n        this.props.history.push(\"/main\");\n      } catch (err) {\n        console.log(err);\n        this.setState({ error: \"An error ocurred\" });\n      }\n    }\n  };\n}\n\nexport default withRouter(SignUp);"]},"metadata":{},"sourceType":"module"}